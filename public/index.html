<!DOCTYPE html>
<html lang="ko" id="top">
<head>
  <script src="/api-rewrite.js"></script>
  <script src="/config.js"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gold-Star World</title>
  <meta name="robots" content="noindex, nofollow, noarchive, nosnippet">
  <meta http-equiv="Referrer-Policy" content="no-referrer">
  <link rel="stylesheet" href="/style.css" />
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <style>
/* ====== ê³ ê¸‰ í˜¸ë²„ ì´í™íŠ¸ ====== */
.price-box:hover, .carousel-item:hover, .achievement-item:hover, .trade-card:hover,
.story-item:hover, .video-wrap:hover, .supply-box:hover {
  transform: translateY(-8px) scale(1.02);
  box-shadow: 0 0 32px 8px rgba(255, 215, 0, 0.18), 0 0 0 4px rgba(255, 215, 0, 0.12);
  position: relative;
}
.price-box:hover::before, .carousel-item:hover::before, .achievement-item:hover::before, .trade-card:hover::before,
.story-item:hover::before, .video-wrap:hover::before, .supply-box:hover::before {
  content: '';
  position: absolute;
  left: -8px; right: -8px; top: -8px; bottom: -8px;
  pointer-events: none;
  border-radius: 18px;
  box-shadow: 0 0 32px 8px rgba(255,215,0,0.25), 0 0 0 4px rgba(255,215,0,0.18);
  z-index: 2;
  animation: shineGlow 1.2s cubic-bezier(.22,1,.36,1);
}
.section5-title:hover, .section5-text:hover, .kakao-link:hover, .fixed-social-icons a:hover,
.section5 .telegram-link:hover, .section4 .achievement-content h2:hover, .section4 .trade-history-title:hover,
.section2 .story-content h2:hover, .hook .line:hover {
  transform: translateY(-6px) scale(1.01);
  transition: transform 0.35s cubic-bezier(.22,1,.36,1);
}
@keyframes shineGlow {
  0% { opacity: 0; box-shadow: 0 0 0 0 rgba(255,215,0,0.0); }
  40% { opacity: 1; box-shadow: 0 0 32px 8px rgba(255,215,0,0.25), 0 0 0 4px rgba(255,215,0,0.18); }
  100% { opacity: 0.7; box-shadow: 0 0 24px 4px rgba(255,215,0,0.12), 0 0 0 2px rgba(255,215,0,0.10); }
}
/* í˜ì´ë“œì¸ */
.fadein { opacity: 0; transform: translateY(30px);
  transition: opacity 1.2s cubic-bezier(.4,0,.2,1), transform 1.2s cubic-bezier(.4,0,.2,1); }
.fadein.visible { opacity: 1; transform: none; }

/* Intro Fullscreen */
#introOverlay{position:fixed;inset:0;z-index:99999;background:#000;display:flex;align-items:center;justify-content:center;opacity:1;transition:opacity .5s ease;}
#introOverlay.hidden{opacity:0;pointer-events:none;}
#introOverlay img{
  width:100vw;height:auto;max-width:100vw;max-height:100vh;object-fit:contain;display:block;margin:0 auto;
  transform:translateZ(0);backface-visibility:hidden;-webkit-backface-visibility:hidden;
  image-rendering:-webkit-optimize-contrast;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges;
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
}
@media (max-width: 900px) { #introOverlay img { max-height:60vh; } }
@media (max-width: 600px) { #introOverlay img { max-height:40vh; } }

/* Footer bar */
.footer-bar { display:flex;flex-wrap:wrap;gap:24px;justify-content:center;align-items:flex-start;background:#222;color:#fff;padding:32px 16px;font-size:16px; }
@media (max-width: 700px) {
  .footer-bar { flex-direction:column;align-items:stretch;gap:12px;font-size:15px; }
  .footer-bar > div { width:100%;margin-bottom:8px; }
}

/* Section2 */
#section2 .content { padding-top:20px;padding-bottom:20px;height:auto; }
#section2 .story-content h2 { margin-bottom:16px; }
#section2 .story-grid { margin-bottom:24px; }

/* Carousel */
.carousel-wrapper { overflow:hidden;width:100%;margin-top:16px; }
.carousel-track { display:flex;gap:20px;animation: scroll 40s linear infinite; }
.carousel-item { flex:0 0 auto; width:400px;max-width:400px; }
.carousel-item img { width:100%;height:auto;max-height:400px;object-fit:contain;display:block; }
.carousel-item p { text-align:center;margin-top:8px;color:#fff;font-size:16px; }
@keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-6760px); } }

/* Section1 gold-bar ë°˜ì‘í˜• */
@media (max-width:1024px) {
  #section1 .price-image { display: none !important; }
  #section1 .gold-content { justify-content: center; }
  #section1 .main-price, #section1 .supply-price { text-align:center!important;margin:0 auto!important;display:block!important; }
}
@media (max-width:768px) {
  #section1 .price-image { display: none !important; }
  #section1 .gold-content { justify-content: center; flex-direction: column; }
  #section1 .main-price, #section1 .supply-price { text-align:center!important;margin:0 auto!important;display:block!important; }
}

/* ë²„íŠ¼ */
.btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 24px;font-size:16px;font-weight:bold;color:#fff;background:#d4af37;border:none;border-radius:8px;text-decoration:none;transition:.3s;cursor:pointer;position:relative;overflow:hidden;}
.btn-icon{margin-right:8px;font-size:18px;}
.btn:before{content:'';position:absolute;top:50%;left:50%;width:300%;height:300%;background:rgba(255,255,255,.2);border-radius:50%;transition:transform .3s;z-index:0;transform:translate(-50%,-50%) scale(0);}
.btn:hover:before{transform:translate(-50%,-50%) scale(1);}
.btn:hover{background:#b5942b;transform:translateY(-2px);}
.btn:active{transform:translateY(0);}

/* Intro overlay fallback */
#introOverlay { position: fixed; left:0; top:0; width:100vw; height:100vh; z-index:9999; background:#000; display:flex; align-items:center; justify-content:center; transition: opacity 1s; }
#introOverlay.hidden{ opacity:0; pointer-events:none; }
  </style>
</head>
<body>

  <!-- Intro overlay -->
  <div id="introOverlay" aria-hidden="true" role="dialog">
    <img id="introGif" src="img/gold-intro.webp" alt="Intro" style="width:100vw;height:100vh;object-fit:cover;" />
  </div>

  <nav id="navbar">
    <div class="container">
      <div class="logo"><a href="index.html" id="homeLogo"><img src="img/logo.png" alt="ê³¨ë“œìŠ¤íƒ€ ë¡œê³ "></a></div>
      <div class="nav-center">
        <ul class="nav-links">
          <li><a href="#section1">ì†Œê°œ</a></li>
          <li><a href="#section2">ì§„í–‰</a></li>
          <li><a href="#section3">ì˜ìƒ</a></li>
          <li><a href="#section4">ì´ë ¥</a></li>
          <li><a href="#section5">ë¬¸ì˜</a></li>
        </ul>
      </div>
      <div class="nav-right">
        <div class="user-area" id="userArea">
          <a href="signup.html" class="btn user-link" id="signupBtn">íšŒì›ê°€ì…</a>
          <a href="login.html" class="btn user-link" id="loginBtn">ë¡œê·¸ì¸</a>
          <button id="adminReturnBtn" class="btn" style="display:none;margin-left:8px;"><i class="fas fa-cog"></i></button>
        </div>
        <div class="menu-btn" aria-label="ë©”ë‰´ ì—´ê¸°" role="button" tabindex="0">
          <span></span><span></span><span></span>
        </div>
      </div>
    </div>
    <div id="scroll-progress"></div>
  </nav>

  <div id="floatingButtons">
    <button id="scrollToTop" title="ë§¨ ìœ„ë¡œ" aria-label="ë§¨ ìœ„ë¡œ"><i class="fas fa-arrow-up"></i></button>
  </div>
  <div class="fixed-social-icons">
    <a href="https://t.me/Goldstar_Korea" class="social-icon" target="_blank" rel="noopener">
      <img src="img/í…”ë ˆê·¸ë¨ ë¬¸ì˜.png" class="kakao-static" alt="í…”ë ˆê·¸ë¨ ìƒë‹´">
      <img src="img/í…”ë ˆê·¸ë¨ ë¬¸ì˜2.gif" class="kakao-hover" alt="í…”ë ˆê·¸ë¨ ìƒë‹´">
    </a>
  </div>

  <main class="fadein" id="mainFadein">
    <!-- Section1 -->
    <section id="section1" class="section">
      <div class="content fadein">
        <h2 class="hook">
          <span class="line line1">â€œê¸ˆì€ ê²°êµ­ ì˜¤ë¥¸ë‹¤.â€</span>
          <span class="line line2">â€œë‹¤ë§Œ, í•©ë¦¬ì  ê¸ˆì•¡ì— ì‚´ ìˆ˜ ìˆëŠ” ìˆœê°„ì€ ì§§ë‹¤.â€</span>
          <span class="line line3">ì§€ê¸ˆì´ ë°”ë¡œ ê·¸ ìˆœê°„ì…ë‹ˆë‹¤,</span>
          <span class="line line4"><strong>ì¤€ë¹„ë˜ì…¨ë‚˜ìš”?</strong></span>
          <span class="shine-bar" aria-hidden="true"></span>
        </h2>
        <div class="price-box gold-box" id="priceBox">
          <div class="gold-content">
            <img src="img/gold-bar.jpg" class="price-image" alt="ê³¨ë“œë°” ì´ë¯¸ì§€">
            <div class="gold-text">
              <h2 class="price-title">ì˜¤ëŠ˜ì˜ ê¸ˆ ì‹œì„¸ (3.75g)</h2>
              <div id="mainPrice" class="main-price">-</div>
              <div id="priceChange" class="change-line"></div>
              <span class="compare-note">[ì „ì¼ ê¸°ì¤€ ì‹œì„¸ë³€ë™í­]</span>
            </div>
          </div>
        </div>
        <div class="price-box supply-box">
          <h2 class="price-title supply">ê³µê¸‰ ê°€ê²© (3.75g)</h2>
          <div class="main-price supply-price">520,000ì›</div>
          <div class="supply-footer">
            <span class="change-line">â€“</span>
            <span class="compare-note">[í˜„ ì‹œì„¸ ê¸°ì¤€ê³¼ ë¹„êµ]</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Section2 -->
    <section id="section2" class="section">
      <div class="content fadein">
        <div class="story-content">
          <h2>ì£¼ìš” ì´ìŠˆ</h2>
          <div class="story-grid">
            <div class="story-item"><h3>3ì–µ2ì²œë§Œí†¤</h3><p>2022ë…„ 7ì›”<br>ìš°ê°„ë‹¤ ê¸ˆ ë§¤ì¥ëŸ‰ ë°œê²¬</p></div>
            <div class="story-item"><h3>ê¸€ë¡œë²Œ ì£¼ëª©</h3><p>12ì¡°ì› ê°€ì¹˜í‰ê°€,<br>CNN, BBC ë“±<br>í•´ì™¸ ì–¸ë¡  ì§‘ì¤‘ ë³´ë„</p></div>
            <div class="story-item"><h3>ë…ì  ê³„ì•½</h3><p>ì¤‘êµ­ ê´‘ì‚° ì—…ì²´ë“¤ê³¼<br>ì±„êµ´ ë…ì  ê³„ì•½ ì²´ê²°<br>â†’ ê³¨ë“œ ìŠ¤íƒ€, ì¤‘êµ­ ì—…ì²´ì™€<br>ìˆ˜ì…ê³„ì•½ ì²´ê²°</p></div>
          </div>
        </div>
        <div class="carousel-wrapper">
          <div class="carousel-track" id="carousel-track"></div>
        </div>
      </div>
    </section>

    <!-- Section3 -->
    <section id="section3" class="section">
      <div class="content fadein">
        <div class="process-content">
          <h2></h2>
          <div class="video-row top">
            <div class="desc">ìš°ê°„ë‹¤ í™©ê¸ˆ ê¸ˆë§¥,<br>ê·¸ ì†ì— ë‹´ê¸´ ì´ì•¼ê¸°ë¥¼ ë‹´ë‹¤.</div>
            <div class="video-wrap">
              <video controls width="600" height="350" playsinline preload="metadata" poster="img/poster-1.png" controlsList="nodownload noplaybackrate" disablePictureInPicture>
                <source src="https://www.dropbox.com/scl/fi/efoo333ngirzngmdrurd4/movie-1.mp4?rlkey=v24nt37cux82nn9aazn261rhv&raw=1" type="video/mp4" />
                <span>ë¸Œë¼ìš°ì €ê°€ ë™ì˜ìƒì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</span>
              </video>
            </div>
          </div>
          <div class="video-row bottom">
            <div class="video-wrap">
              <video controls width="600" height="350" playsinline preload="metadata" poster="img/poster-2.png" controlsList="nodownload noplaybackrate" disablePictureInPicture>
                <source src="https://www.dropbox.com/scl/fi/71q6v1ntaebtudq2ttpwq/movie-2.mp4?rlkey=7xw94d6yho2bcf3b6l4wsarse&raw=1" type="video/mp4" />
                <span>ë¸Œë¼ìš°ì €ê°€ ë™ì˜ìƒì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</span>
              </video>
            </div>
            <div class="desc">ìš°ê°„ë‹¤ ì•„í”„ë¦¬ì¹´ì˜ í¬ë§,<br>ì„¸ê³„ê°€ ì£¼ëª©í•˜ë‹¤.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section4 -->
    <section id="section4" class="section">
      <div class="content fadein">
        <div class="achievement-content">
          <h2>ì‹¤ì œ ê³µê¸‰ ì„±ê³¼</h2>
          <div class="achievement-grid">
            <div class="achievement-item"><h3>55kg</h3><p>ì´ ê³µê¸‰ ì™„ë£ŒëŸ‰</p></div>
            <div class="achievement-item"><h3>18.4%</h3><p>ì‹œì„¸ ëŒ€ë¹„ í‰ê·  í• ì¸ìœ¨</p></div>
            <div class="achievement-item"><h3>1,581ëª…</h3><p>ëˆ„ì  ì°¸ì—¬ íšŒì›</p></div>
          </div>
          <div class="trade-history-box">
            <h3 class="trade-history-title">ì£¼ìš” ì´ë ¥</h3>
            <div class="trade-grid">
              <div class="achievement-item trade-card">
                <div class="trade-card-header">
                  <span class="trade-card-icon">ğŸ“</span>
                  <span class="trade-card-title">2023ë…„ 6ì›” 15ì¼ Â· ìš°ê°„ë‹¤</span>
                </div>
                <div class="trade-card-body">
                  <div class="trade-card-row"><b>ì°¸ì—¬ ì¸ì›:</b> 7ëª… (êµ¬ë§¤íŒ€ 3, í’ˆì§ˆê²€ìˆ˜ 2, ë¬¼ë¥˜/ë³´í—˜ 2)</div>
                  <div class="trade-card-row"><b>ìˆ˜ì… ë¬¼ëŸ‰:</b> 18kg ê¸ˆê´´ (ì•½ $580,000)</div>
                  <div class="trade-card-row"><b>ì´ ìˆ˜ì…:</b> 4,800ëˆ</div>
                  <div class="trade-card-row"><b>ê±°ë˜ ë‚´ìš©:</b> ìš°ê°„ë‹¤ ì„œë¶€ Mubende ì§€ì—­ ì›ê´‘ ì •ì œ í›„ ìˆ˜ì¶œ, ê³µì‹ ê³„ì•½ ë° í—ˆê°€, ì¸ì²œê³µí•­ ë„ì°© í›„ í†µê´€.</div>
                  <div class="trade-card-row"><b>íŠ¹ì§•:</b> ì²« ì•„í”„ë¦¬ì¹´ ì§ë„ì…, ì¼ë¶€ëŠ” íˆ¬ìí˜• ê³¨ë“œë°” ì œì‘.</div>
                </div>
                <div class="trade-card-summary">
                  <span><b>êµ­ì œ ì‹œì„¸:</b> $1,956.81/oz (1g â‰ˆ $62.92)</span>
                  <span><b>í™˜ìœ¨:</b> 1USD â‰ˆ 1,273.28ì›</span>
                  <span><b>ì´ ê¸ˆì•¡:</b> $1,132,600 / ì•½ 14.4ì–µì›</span>
                </div>
              </div>
              <div class="achievement-item trade-card">
                <div class="trade-card-header">
                  <span class="trade-card-icon">ğŸ“</span>
                  <span class="trade-card-title">2024ë…„ 8ì›” 8ì¼ Â· ìš°ê°„ë‹¤</span>
                </div>
                <div class="trade-card-body">
                  <div class="trade-card-row"><b>ì°¸ì—¬ ì¸ì›:</b> 12ëª… (êµ¬ë§¤íŒ€ 4, ê°ì • 2, ë¬¼ë¥˜ 4, ë³´í—˜ 2)</div>
                  <div class="trade-card-row"><b>ìˆ˜ì… ë¬¼ëŸ‰:</b> 32kg ê¸ˆê´´ + 5kg ê¸ˆì„ </div>
                  <div class="trade-card-row"><b>ì´ ìˆ˜ì…:</b> 9,867ëˆ</div>
                  <div class="trade-card-row"><b>ê±°ë˜ ë‚´ìš©:</b> ìš°ê°„ë‹¤ ê¸ˆê´‘ â†’ ì •ì œì†Œ â†’ ë‘ë°”ì´ ê²½ìœ  â†’ í•œêµ­, ìˆœë„ ì¸ì¦ì„œ í™•ë³´, ì„œìš¸ ë³´ì„¸ì°½ê³  ë³´ê´€.</div>
                  <div class="trade-card-row"><b>íŠ¹ì§•:</b> ì—°ê°„ ìˆ˜ì…ëŸ‰ 25% ê·œëª¨, ì£¼ì–¼ë¦¬ ì œì‘ í™œìš©.</div>
                </div>
                <div class="trade-card-summary">
                  <span><b>êµ­ì œ ì‹œì„¸:</b> $2,418.76/oz (1g â‰ˆ $77.81)</span>
                  <span><b>í™˜ìœ¨:</b> 1USD â‰ˆ 1,377.27ì›</span>
                  <span><b>ì´ ê¸ˆì•¡:</b> $2,881,400 / ì•½ 39.7ì–µì›</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section5 -->
    <section id="section5" class="section">
      <div class="content center fadein">
        <h2 class="section5-title">ì§€ê¸ˆ ë°”ë¡œ ë¬¸ì˜í•˜ì„¸ìš”</h2>
        <h2 class="section5-title">íšŒì›ê°€ì… í›„ ì§ì ‘ ì£¼ë¬¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.</h2>
        <h2 class="section5-title">ê¶ê¸ˆí•˜ì‹  ì‚¬í•­ì€ í…”ë ˆê·¸ë¨ ìœ¼ë¡œ ë¬¸ì˜ ì£¼ì„¸ìš”.</h2>
        <p class="section5-text">ê³¨ë“œìŠ¤íƒ€ì™€ í•¨ê»˜ ìƒˆë¡œìš´ íˆ¬ìì˜ ê¸°íšŒë¥¼ ì‹œì‘í•˜ì„¸ìš”</p>
        <div class="contact-buttons">
          <a href="#" class="kakao-link"><img src="img/ì¹´ì¹´ì˜¤í†¡ ë¬¸ì˜.gif" alt="ì¹´ì¹´ì˜¤í†¡ ë¬¸ì˜"/></a>
          <a href="https://t.me/Goldstar_Korea" target="_blank" rel="noopener"><img src="img/í…”ë ˆê·¸ë¨ ë¬¸ì˜.gif" alt="í…”ë ˆê·¸ë¨ ë¬¸ì˜"/></a>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="company-info">
      <div class="info-content">
        <div class="company-info-grid">
          <div class="info-section">
            <h3>íšŒì‚¬ ì •ë³´</h3>
            <p>ìƒí˜¸ëª…: ê³¨ë“œìŠ¤íƒ€</p>
            <p>ëŒ€í‘œì´ì‚¬: ì´í¬ì² </p>
            <p>ì‚¬ì—…ìë“±ë¡ë²ˆí˜¸: 530-36-00757</p>
            <p>ì£¼ì†Œ: ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨ëŒ€ë¡œ 584 ì„±ì¼ë¹Œë”©</p>
          </div>
          <div class="info-section">
            <h3>ê³ ê°ì§€ì›</h3>
            <p>ìš´ì˜ì‹œê°„: í‰ì¼ 09:00 - 18:00</p>
            <p>ì ì‹¬ì‹œê°„: 12:00 - 13:00</p>
            <p>í† /ì¼/ê³µíœ´ì¼ íœ´ë¬´</p>
            <p>&lt;ì¹´ì¹´ì˜¤í†¡, í…”ë ˆê·¸ë¨ ë¬¸ì˜ëŠ” íœ´ë¬´ ê´€ê³„ì—†ì´ ë¬¸ì˜ ê°€ëŠ¥í•©ë‹ˆë‹¤.&gt;</p>
          </div>
        </div>
      </div>
    </footer>
  </main>

  <script src="/hover-gif.js"></script>
  <script src="/app.js"></script>

  <script>
/* ===== ê³µí†µ ìœ ì € ì„¸ì…˜ ìœ í‹¸ ===== */
function getStoredUser(){
  try {
    const u = window.GSApp?.currentUser?.();
    if (u) { setStoredUser(u); return u; }
  } catch(_){}
  try {
    return JSON.parse(localStorage.getItem('gs_user')) ||
           JSON.parse(localStorage.getItem('gs_user_backup')) || null;
  } catch(_){ return null; }
}
function setStoredUser(u){
  try {
    if (!u) return;
    localStorage.setItem('gs_user', JSON.stringify(u));
    localStorage.setItem('gs_user_backup', JSON.stringify(u));
  } catch(_){}
}
function clearStoredUser(){
  try {
    localStorage.removeItem('gs_user');
    localStorage.removeItem('gs_user_backup');
  } catch(_){}
}

/* ===== ì¹´ì¹´ì˜¤í†¡ ë¬¸ì˜ ì•Œë¦¼ ===== */
document.addEventListener('DOMContentLoaded', function() {
  document.querySelectorAll('.kakao-link').forEach(el => {
    el.addEventListener('click', function(e) {
      e.preventDefault();
      alert('ì¤€ë¹„ì¤‘ì…ë‹ˆë‹¤.');
    });
  });
});

/* ===== í˜ì´ë“œì¸ ===== */
document.addEventListener('DOMContentLoaded', function(){
  const fadeEls = document.querySelectorAll('.fadein');
  const mainFade = document.getElementById('mainFadein');
  if(mainFade) setTimeout(()=>mainFade.classList.add('visible'), 400);
  const observer = new IntersectionObserver((entries)=>{
    entries.forEach(entry=>{ if(entry.isIntersecting){ entry.target.classList.add('visible'); } });
  }, { threshold: 0.3 });
  fadeEls.forEach(el=> observer.observe(el));
});

/* ===== ë„¤ë¹„ê²Œì´ì…˜: ê´€ë¦¬ì/ì‚¬ìš©ì í‘œì‹œ ===== */
function rebuildUserArea(){
  const area   = document.getElementById('userArea');
  const signup = document.getElementById('signupBtn');
  const login  = document.getElementById('loginBtn');
  const adminBtn = document.getElementById('adminReturnBtn');

  const adminSession = !!localStorage.getItem('admin_session_v1');
  const user = getStoredUser();

  // ê´€ë¦¬ì ë²„íŠ¼
  if (adminBtn) adminBtn.style.display = adminSession ? 'inline-flex' : 'none';

  if (user && user.role !== 'admin') {
    // ë¡œê·¸ì¸ ìƒíƒœ: íšŒì›ê°€ì…/ë¡œê·¸ì¸ ìˆ¨ê¹€ + ë‚´ì •ë³´ ë²„íŠ¼ë§Œ
    if (signup) signup.style.display = 'none';
    if (login)  login.style.display  = 'none';
    if (area) {
      area.innerHTML = '<a href="profile.html" class="btn user-link" id="profileLink">ë‚´ì •ë³´</a>' +
                       (adminSession ? ' <button id="adminReturnBtn" class="btn" style="margin-left:8px;"><i class="fas fa-cog"></i></button>' : '');
    }
    // ìë™ ì´ë™ (ìš”êµ¬ì‚¬í•­): ê´€ë¦¬ì ì•„ë‹ ë•Œë§Œ
    if (!adminSession) {
      setTimeout(()=>{ location.replace('profile.html'); }, 150);
    }
  } else {
    // ë¹„ë¡œê·¸ì¸: ê¸°ë³¸ íšŒì›ê°€ì…/ë¡œê·¸ì¸ ë…¸ì¶œ
    if (area && (!area.querySelector('#signupBtn') || !area.querySelector('#loginBtn'))) {
      area.innerHTML = '<a href="signup.html" class="btn user-link" id="signupBtn">íšŒì›ê°€ì…</a> '+
                       '<a href="login.html" class="btn user-link" id="loginBtn">ë¡œê·¸ì¸</a>' +
                       (adminSession ? ' <button id="adminReturnBtn" class="btn" style="margin-left:8px;"><i class="fas fa-cog"></i></button>' : '');
    }
  }
}
document.addEventListener('DOMContentLoaded', function(){
  rebuildUserArea();
  const adminBtn = document.getElementById('adminReturnBtn');
  adminBtn?.addEventListener('click', ()=>{ location.href = 'admin/index.html'; });
  // í™ˆ ë¡œê³  í´ë¦­ ì‹œì—ë„ ì„¸ì…˜ ë³µì œ ìœ ì§€
  const homeLogo = document.getElementById('homeLogo');
  homeLogo?.addEventListener('click', (e)=>{ const u = getStoredUser(); if (u) setStoredUser(u); });
});

/* ===== Intro overlay ===== */
(function(){
  const overlay=document.getElementById('introOverlay');
  const img=document.getElementById('introGif');
  if(!overlay||!img) return;
  const played=sessionStorage.getItem('intro_played_v10');
  if(played){ overlay.style.display='none'; document.body.style.overflow=''; document.documentElement.style.overflow=''; return; }
  function hideIntro(){
    overlay.classList.add('hidden');
    setTimeout(()=>{
      img.remove(); overlay.style.display='none';
      document.body.style.overflow=''; document.documentElement.style.overflow='';
      sessionStorage.setItem('intro_played_v10','1');
    }, 1000);
  }
  document.documentElement.style.overflow='hidden';
  document.body.style.overflow='hidden';
  setTimeout(hideIntro, 4000);
  overlay.addEventListener('click', hideIntro);
})();

/* ===== ë³´ì•ˆ/UX ===== */
document.addEventListener('contextmenu', e=> e.preventDefault());
document.addEventListener('dragstart', e=> e.preventDefault());
document.addEventListener('copy', e=> { e.clipboardData?.setData('text/plain',''); e.preventDefault(); });

/* ===== ë„¤ë¹„ ìŠ¤í¬ë¡¤ í˜ì´ë“œ ===== */
(function(){
  let lastY = window.scrollY;
  const nav = document.getElementById('navbar');
  const thresholdHide = 40;
  let forcedShow = false;
  function handleScroll(){
    if(forcedShow){return;}
    const y = window.scrollY;
    if (y > thresholdHide) {
      if (y > lastY) nav.classList.add('nav-hidden');
      else nav.classList.remove('nav-hidden');
    } else nav.classList.remove('nav-hidden');
    lastY = y;
  }
  window.addEventListener('scroll', handleScroll);
  window.addEventListener('mousemove', e => {
    if (e.clientY <= 24) {
      forcedShow = true; nav.classList.remove('nav-hidden');
      clearTimeout(window.__navForceTimer);
      window.__navForceTimer = setTimeout(()=>{ forcedShow=false; handleScroll(); },1500);
    }
  });
})();

/* ===== ë©”ë‰´ í† ê¸€/ì•µì»¤ ìŠ¤í¬ë¡¤ ===== */
document.addEventListener('DOMContentLoaded', ()=>{
  const menuBtn = document.querySelector('.menu-btn');
  const navLinks = document.querySelector('.nav-links');
  menuBtn?.addEventListener('click', ()=>{ menuBtn.classList.toggle('active'); navLinks?.classList.toggle('active'); });
  document.querySelectorAll('a[href^="#"]').forEach(a=>{
    a.addEventListener('click', e=>{
      const t = document.querySelector(a.getAttribute('href'));
      if (t) { e.preventDefault(); t.scrollIntoView({ behavior:'smooth', block:'start' }); }
    });
  });
  document.querySelectorAll('.nav-links a').forEach(l=>{
    l.addEventListener('click', ()=>{ menuBtn?.classList.remove('active'); navLinks?.classList.remove('active'); });
  });
  document.getElementById('scrollToTop')?.addEventListener('click', ()=>{ window.scrollTo({ top:0, behavior:'smooth' }); });
});

/* ===== ìŠ¤í¬ë¡¤ ì§„í–‰ë¥  ===== */
const bar = document.getElementById('scroll-progress');
function updateBar() {
  const s = window.pageYOffset || document.documentElement.scrollTop;
  const dh = document.documentElement.scrollHeight - window.innerHeight;
  if (bar) bar.style.width = dh ? (s/dh*100)+'%' : '0%';
}
window.addEventListener('scroll', updateBar);
window.addEventListener('resize', updateBar);
document.addEventListener('DOMContentLoaded', updateBar);

/* ===== ê¸ˆ ì‹œì„¸ API & ë Œë” ===== */
const API_URL = 'https://gold-price-proxy.hanoiosaka1.workers.dev/price';
const fmt = n => Number(n).toLocaleString('ko-KR');

function animateNumber(el, from, to, duration = 2800, onComplete){
  from = Number(from)||0; to = Number(to)||0;
  if (!el) { onComplete&&onComplete(); return; }
  if (from === to) { el.textContent = fmt(to)+'ì›'; onComplete&&onComplete(); return; }
  const start = performance.now();
  function step(now){
    const p = Math.min((now-start)/duration, 1);
    const cur = Math.floor(from + (to-from)*p);
    el.textContent = fmt(cur) + 'ì›';
    if (p < 1) requestAnimationFrame(step);
    else { el.textContent = fmt(to)+'ì›'; onComplete&&onComplete(); }
  }
  requestAnimationFrame(step);
}

function goldFirework(targetEl){
  if (!targetEl) return;
  const rect = targetEl.getBoundingClientRect();
  const canvas = document.createElement('canvas');
  canvas.style.position='fixed';
  canvas.style.left=(rect.left + window.scrollX - rect.width*0.5)+'px';
  canvas.style.top=(rect.top + window.scrollY - rect.height*0.5)+'px';
  canvas.width=rect.width*2; canvas.height=rect.height*2;
  canvas.style.pointerEvents='none'; canvas.style.zIndex=9999;
  document.body.appendChild(canvas);
  const ctx=canvas.getContext('2d'); const particles=[];
  const colors=['#FFD700','#FFF8DC','#FFEC8B','#FFFACD','#F5DEB3'];
  for(let i=0;i<48;i++){
    const angle=(Math.PI*2*i)/48; const speed=3+Math.random()*5;
    particles.push({ x:canvas.width/2,y:canvas.height/2,vx:Math.cos(angle)*speed,vy:Math.sin(angle)*speed,r:4+Math.random()*5,color:colors[Math.floor(Math.random()*colors.length)],alpha:1 });
  }
  let frame=0;
  (function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach(p=>{ ctx.globalAlpha=p.alpha; ctx.beginPath(); ctx.arc(p.x,p.y,p.r,0,Math.PI*2); ctx.fillStyle=p.color; ctx.fill();
      p.x+=p.vx; p.y+=p.vy; p.alpha-=0.012; });
    frame++; if(frame<90) requestAnimationFrame(draw); else canvas.remove();
  })();
}

async function renderGoldPrice(){
  const priceEl  = document.getElementById('mainPrice');
  const changeEl = document.getElementById('priceChange');
  const supplyEl = document.querySelector('.supply-price');
  const supplyCh = document.querySelector('.supply-footer .change-line');

  if (priceEl) { priceEl.textContent='0ì›'; priceEl.style.textAlign='center'; priceEl.style.margin='0 auto'; priceEl.style.display='block'; }
  if (supplyEl){ supplyEl.textContent='0ì›'; supplyEl.style.textAlign='center'; supplyEl.style.margin='0 auto'; supplyEl.style.display='block'; }

  let basePrice = 0;
  let supplyVal = 520000; // ê³µê¸‰ê°€ ê³ ì •(í•„ìš” ì‹œ /apiì—ì„œ ê°€ì ¸ì˜¤ë„ë¡ ë³€ê²½ ê°€ëŠ¥)

  const runEffects = (main, supply) => {
    animateNumber(priceEl, 0, main, 2800, ()=>goldFirework(priceEl));
    animateNumber(supplyEl,0, supply, 2800, ()=>goldFirework(supplyEl));
  };

  try {
    // 1) KV(/api/security?type=goldprice)
    const kvRes = await fetch('/api/security?type=goldprice', {cache:'no-store'});
    const kvJson = await kvRes.json().catch(()=>null);
    const gp = kvJson?.data?.goldprice ?? kvJson?.goldprice ?? null;
    if (gp) {
      if (typeof gp.supplyPrice === 'number') supplyVal = gp.supplyPrice;
      if (typeof gp.price === 'number') basePrice = gp.price;
    }
  } catch(_) {}

  if (!basePrice) {
    // 2) ì™¸ë¶€ API í´ë°±
    try {
      const d = await fetch(API_URL).then(r=>r.json());
      if (d && d.price) {
        basePrice = d.price;
        const arrow = d.trend==='up' ? 'â–²' : d.trend==='down' ? 'â–¼' : '';
        const pct   = d.percent || '';
        const chg   = d.change ? fmt(d.change)+'ì›' : '';
        if (changeEl) {
          changeEl.textContent = [arrow, pct, chg].filter(Boolean).join(' ');
          changeEl.className = 'change-line' + (d.trend==='up'?' up':d.trend==='down'?' down':'');
        }
      }
    } catch(_) {}
  }

  // ìµœí›„ í´ë°±: GSApp.goldPrice
  try { if (!basePrice && typeof GSApp?.goldPrice === 'number') basePrice = GSApp.goldPrice; } catch(_){}

  // ë Œë” + ë¹„êµ í‘œì‹œ
  runEffects(basePrice, supplyVal);
  if (supplyCh && basePrice > 0 && supplyVal > 0) {
    const rate = (basePrice - supplyVal)/basePrice*100;
    const sign = rate > 0 ? 'â–¼' : 'â–²';
    const abs  = Math.abs(rate).toFixed(2) + '%';
    supplyCh.textContent = `${sign} ${abs}`;
    supplyCh.className = 'change-line ' + (rate > 0 ? 'down' : 'up');
  }

  // âœ… í”„ë¡œí•„ ì£¼ë¬¸ íŒ¨ë„ì—ì„œ ë™ì¼ ê°’ ì“°ë„ë¡ ì €ì¥
  try {
    localStorage.setItem('gs_gold_price', String(basePrice));
    localStorage.setItem('gs_supply_price', String(supplyVal));
  } catch(_) {}
}

/* Intro ì¢…ë£Œ í›„ ì‹œì„¸ ë Œë” ì‹œì‘ */
document.addEventListener('DOMContentLoaded', function(){
  let started = false;
  function start(){ if (!started){ started=true; setTimeout(renderGoldPrice, 300); } }
  const overlay = document.getElementById('introOverlay');
  if (overlay) {
    let ended = false;
    function trigger(){ if (!ended){ ended=true; start(); } }
    overlay.addEventListener('transitionend', trigger);
    overlay.addEventListener('click', trigger);
    setTimeout(trigger, 6000);
  } else start();
});

/* ===== Section2 Carousel ===== */
const MAX_ITEMS = 20, VISIBLE_COUNT = 13;
document.addEventListener('DOMContentLoaded', () => {
  const items = [
    { img: 'section_1.jpg',  desc: 'ìš°ê°„ë‹¤ í™©ê¸ˆì˜ ì²« ê±¸ìŒ â€” ë•…ì†ì—ì„œ í”¼ì–´ë‚˜ëŠ” ê¸°íšŒì˜ ë¹›' },
    { img: 'section_2.jpg',  desc: 'ì§€í•˜ ì•”ì„ ì† í™©ê¸ˆì˜ ê¸¸ â€” ëì—†ëŠ” ë„ì „' },
    { img: 'section_3.jpg',  desc: 'ëŒ€ì§€ ìœ„ì— í¼ì³ì§„ ìƒëª…ì˜ ê´‘ë§¥ â€” ê³µë™ì˜ ë•€ê³¼ ë…¸ë ¥' },
    { img: 'section_4.jpg',  desc: 'ë…¸ë™ì˜ í˜ì´ ê³„ì•½ì´ ë˜ê³ , í¬ë§ì´ ëœë‹¤ 1' },
    { img: 'section_5.jpg',  desc: 'ë…¸ë™ì˜ í˜ì´ ê³„ì•½ì´ ë˜ê³ , í¬ë§ì´ ëœë‹¤ 2' },
    { img: 'section_6.jpg',  desc: 'ë¶‰ì€ ëŒ€ì§€ì—ì„œ í”¼ì–´ë‚˜ëŠ” í™©ê¸ˆì˜ ì—´ì •' },
    { img: 'section_7.jpg',  desc: 'í™©í† ë¹› ë¬¼ì—ì„œ ìºë‚´ëŠ” ì‚¶ì˜ ì›ì²œ' },
    { img: 'section_8.jpg',  desc: 'í•¨ê»˜í•˜ëŠ” ì†ê¸¸ì´ ë§Œë“œëŠ” í™©ê¸ˆì˜ ë¯¸ë˜' },
    { img: 'section_9.jpg',  desc: 'ì²¨ë‹¨ ê¸°ìˆ ì´ ë”í•˜ëŠ” ê°€ì¹˜ â€” ê¸ˆì˜ ìƒˆë¡œìš´ ì‹œëŒ€' },
    { img: 'section_10.jpg', desc: 'ë…¸ë ¥ì˜ í™©ê¸ˆì˜ ê²°ì‹¤ì— ëŒ€í•œ ì„¬ì„¸í•œ ì„±ë¶„ ê²€ì‚¬' },
    { img: 'section_11.jpg', desc: 'í™©ê¸ˆì˜ ê²°ì‹¤ â€” ìš°ê°„ë‹¤ ë•…ì—ì„œ í”¼ì–´ë‚œ ë¶€ì™€ ê°€ì¹˜' },
    { img: 'section_12.jpg', desc: 'ì•ˆì „ ì†ì—ì„œ ì§€ì¼œë‚¸ ìì› â€” ì±…ì„ ìˆëŠ” ì±„êµ´' },
    { img: 'section_13.jpg', desc: 'ê³µì‹ì ì¸ ê³„ì•½ê³¼ ì•½ì† â€” ì‹ ë¢°ë¡œ ì„¸ì›Œê°€ëŠ” í™©ê¸ˆì˜ ë¯¸ë˜' },
    { img: 'section_14.jpg', desc: 'ì‚¬ì§„14' },{ img: 'section_15.jpg', desc: 'ì‚¬ì§„15' },
    { img: 'section_16.jpg', desc: 'ì‚¬ì§„16' },{ img: 'section_17.jpg', desc: 'ì‚¬ì§„17' },
    { img: 'section_18.jpg', desc: 'ì‚¬ì§„18' },{ img: 'section_19.jpg', desc: 'ì‚¬ì§„19' },
    { img: 'section_20.jpg', desc: 'ì‚¬ì§„20' }
  ];
  const track = document.getElementById('carousel-track');
  const count = Math.min(VISIBLE_COUNT, MAX_ITEMS, items.length);
  if (track) {
    items.slice(0, count).forEach(item=>{
      if (item.img) {
        const div = document.createElement('div'); div.className='carousel-item';
        const imgEl = document.createElement('img'); imgEl.src = `img/${item.img}`; imgEl.alt = item.desc;
        const p = document.createElement('p'); p.textContent = item.desc;
        div.append(imgEl, p); track.append(div);
      }
    });
    track.innerHTML += track.innerHTML; // ë£¨í”„
  }
});

/* ===== ë³´ì¡°: app.js ì´ˆê¸°í™” í›„ ë³´ì¥ ===== */
document.addEventListener('DOMContentLoaded', ()=>{
  function safeBuild(){ if(window.GSApp && typeof window.GSApp.buildUserNav === 'function'){ window.GSApp.buildUserNav(); } }
  safeBuild(); setTimeout(safeBuild, 300); setTimeout(safeBuild, 1000);
});

/* ===== í…”ë ˆê·¸ë¨/ì´ë¯¸ì§€ í˜¸ë²„ ===== */
document.addEventListener('DOMContentLoaded', function(){
  document.querySelectorAll('.contact-buttons img, .fixed-social-icons img').forEach(function(img){
    img.addEventListener('mouseenter', function(){ img.style.transform = 'translateY(-8px) scale(1.03)'; });
    img.addEventListener('mouseleave', function(){ img.style.transform = ''; });
  });
});

/* ===== ìŠ¤í¬ë¡¤íƒ‘ ì•„ì´ì½˜ ë³´ì • ===== */
document.addEventListener('DOMContentLoaded', function(){
  var scrollBtn = document.getElementById('scrollToTop');
  if(scrollBtn) {
    var icon = scrollBtn.querySelector('i');
    if(icon) { icon.className = 'fas fa-arrow-up'; icon.textContent = ''; }
    else { var newIcon = document.createElement('i'); newIcon.className = 'fas fa-arrow-up'; scrollBtn.innerHTML=''; scrollBtn.appendChild(newIcon); }
  }
});
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ko" id="top">
<head>
  <script src="/api-rewrite.js"></script>
  <script src="/config.js"></script>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gold-Star World</title>
  <meta name="robots" content="noindex, nofollow, noarchive, nosnippet">
  <meta http-equiv="Referrer-Policy" content="no-referrer">
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
  <style>
  /* ===============================
     페이드인: 아래에서 위로 올라오는 효과
  =============================== */
  .fadein {
    opacity: 0;
    transform: translateY(50px);
    transition: opacity 1.2s ease, transform 1.2s ease;
    will-change: opacity, transform;
  }
  .fadein.visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Intro Fullscreen */
  #introOverlay{position:fixed;inset:0;z-index:99999;background:#000;display:flex;align-items:center;justify-content:center;opacity:1;transition:opacity .5s ease;}
  #introOverlay.hidden{opacity:0;pointer-events:none;}
  #introOverlay img{
    width:100vw;height:auto;max-width:100vw;max-height:100vh;object-fit:contain;
  }

  /* 금시세 박스 가격 센터 정렬 */
  #mainPrice {
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    font-size: 2rem;
    font-weight: bold;
  }
  @media (max-width:768px) {
    #mainPrice {
      font-size: 1.5rem;
    }
  }

  /* 기타 스타일 (생략 부분 기존 그대로 유지) */
  </style>
</head>
<body>

  <!-- Intro overlay -->
  <div id="introOverlay">
    <img id="introGif" src="img/gold-intro.webp" alt="Intro" />
  </div>

  <!-- 네비게이션 -->
  <nav id="navbar"> ... </nav>

  <main class="fadein" id="mainFadein">
    <!-- Section1 -->
    <section id="section1" class="section">
      <div class="content fadein">
        <h2 class="hook">
          <span class="line line1">“금은 결국 오른다.”</span>
          <span class="line line2">“다만, 합리적 금액에 살 수 있는 순간은 짧다.”</span>
          <span class="line line3">지금이 바로 그 순간입니다,</span>
          <span class="line line4"><strong>준비되셨나요?</strong></span>
        </h2>
        <div class="price-box gold-box">
          <div class="gold-content">
            <img src="img/gold-bar.jpg" class="price-image" alt="골드바 이미지">
            <div class="gold-text">
              <h2 class="price-title">오늘의 금 시세 (3.75g)</h2>
              <div id="mainPrice" class="main-price">-</div>
              <div id="priceChange" class="change-line"></div>
              <span class="compare-note">[전일 기준 시세변동폭]</span>
            </div>
          </div>
        </div>
        <div class="price-box supply-box">
          <h2 class="price-title supply">공급 가격 (3.75g)</h2>
          <div class="main-price supply-price">520,000원</div>
          <div class="supply-footer">
            <span class="change-line">–</span>
            <span class="compare-note">[현 시세 기준과 비교]</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Section2: 진행 (이전 상태로 복원) -->
    <section id="section2" class="section">
  <div class="content fadein">
        <div class="story-content">
          <h2>주요 이슈</h2>
          <div class="story-grid">
            <div class="story-item"><h3>3억2천만톤</h3><p>2022년 7월우간다 금 매장량 발견</p></div>
            <div class="story-item"><h3>글로벌 주목</h3><p>12조원 가치평가, CNN, BBC 등 해외 언론 집중 보도</p></div>
            <div class="story-item"><h3>독점 계약</h3><p>우간다 금맥, 중국 광산업체들과 채굴 독점 계약 체결 → 골드 스타, 중국 업체와 수입계약 체결</p></div>
          </div>
        </div>
        <div class="carousel-wrapper">
          <div class="carousel-track" id="carousel-track"></div>
        </div>
      </div>
    </section>

    <!-- Section3 -->
    <section id="section3" class="section">
  <div class="content fadein">
        <div class="process-content">
          <h2></h2>
          <!-- 상단 행: 좌측 설명, 우측 영상 -->
          <div class="video-row top">
            <div class="desc">우간다 황금 금맥,<br>그 속에 담긴 이야기를 담다.</div>
            <div class="video-wrap">
              <!-- 섹션3 영상: 600x350 고정, poster로 첫 프레임 이미지 지정 -->
              <video controls width="600" height="350" playsinline preload="metadata" poster="img/poster-1.png" controlsList="nodownload noplaybackrate" disablePictureInPicture>
                <source src="https://www.dropbox.com/scl/fi/efoo333ngirzngmdrurd4/movie-1.mp4?rlkey=v24nt37cux82nn9aazn261rhv&raw=1" type="video/mp4" />
                <span>브라우저가 동영상을 지원하지 않습니다.</span>
              </video>
            </div>
          </div>
          <!-- 하단 행: 좌측 영상, 우측 설명 -->
          <div class="video-row bottom">
            <div class="video-wrap">
              <!-- 섹션3 영상: poster 속성으로 첫 프레임 썸네일 이미지 지정 -->
              <video controls width="600" height="350" playsinline preload="metadata" poster="img/poster-2.png" controlsList="nodownload noplaybackrate" disablePictureInPicture>
                <source src="https://www.dropbox.com/scl/fi/71q6v1ntaebtudq2ttpwq/movie-2.mp4?rlkey=7xw94d6yho2bcf3b6l4wsarse&raw=1" type="video/mp4" />
                <span data-i18n="video_not_supported">브라우저가 동영상을 지원하지 않습니다.</span>
              </video>
            </div>
            <div class="desc">우간다 아프리카의 희망,<br>세계가 주목하다.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section4 -->
    <section id="section4" class="section">
  <div class="content fadein">
        <div class="achievement-content">
          <h2>실제 공급 성과</h2>
          <div class="achievement-grid">
            <div class="achievement-item"><h3>55kg</h3><p>총 공급 완료량</p></div>
            <div class="achievement-item"><h3>18.4%</h3><p>시세 대비 평균 할인율</p></div>
            <div class="achievement-item"><h3>1,581명</h3><p>누적 참여 회원</p></div>
          </div>
          <div class="trade-history-box">
            <h3 class="trade-history-title">주요 이력</h3>
            <div class="trade-grid">
              <div class="achievement-item trade-card">
                <div class="trade-card-header">
                  <span class="trade-card-icon">📝</span>
                  <span class="trade-card-title">2023년 6월 15일 · 우간다</span>
                </div>
                <div class="trade-card-body">
                  <div class="trade-card-row"><b>참여 인원:</b> 7명 (구매팀 3, 품질검수 2, 물류/보험 2)</div>
                  <div class="trade-card-row"><b>수입 물량:</b> 18kg 금괴 (약 $580,000)</div>
                  <div class="trade-card-row"><b>총 수입:</b> 4,800돈</div>
                  <div class="trade-card-row"><b>거래 내용:</b> 우간다 서부 Mubende 지역 원광 정제 후 수출, 공식 계약 및 허가, 인천공항 도착 후 통관.</div>
                  <div class="trade-card-row"><b>특징:</b> 첫 아프리카 직도입, 일부는 투자형 골드바 제작.</div>
                </div>
                <div class="trade-card-summary">
                  <span><b>국제 시세:</b> $1,956.81/oz (1g ≈ $62.92)</span>
                  <span><b>환율:</b> 1USD ≈ 1,273.28원</span>
                  <span><b>총 금액:</b> $1,132,600 / 약 14.4억원</span>
                </div>
              </div>
              <div class="achievement-item trade-card">
                <div class="trade-card-header">
                  <span class="trade-card-icon">📝</span>
                  <span class="trade-card-title">2024년 8월 8일 · 우간다</span>
                </div>
                <div class="trade-card-body">
                  <div class="trade-card-row"><b>참여 인원:</b> 12명 (구매팀 4, 감정 2, 물류 4, 보험 2)</div>
                  <div class="trade-card-row"><b>수입 물량:</b> 32kg 금괴 + 5kg 금선</div>
                  <div class="trade-card-row"><b>총 수입:</b> 9,867돈</div>
                  <div class="trade-card-row"><b>거래 내용:</b> 우간다 금광 → 정제소 → 두바이 경유 → 한국, 순도 인증서 확보, 서울 보세창고 보관.</div>
                  <div class="trade-card-row"><b>특징:</b> 연간 수입량 25% 규모, 주얼리 제작 활용.</div>
                </div>
                <div class="trade-card-summary">
                  <span><b>국제 시세:</b> $2,418.76/oz (1g ≈ $77.81)</span>
                  <span><b>환율:</b> 1USD ≈ 1,377.27원</span>
                  <span><b>총 금액:</b> $2,881,400 / 약 39.7억원</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Section5 -->
    <section id="section5" class="section">
  <div class="content center fadein">
  <h2 class="section5-title">지금 바로 문의하세요</h2>
  <h2 class="section5-title">현재 회원가입은 텔레그램 문의로 진행됩니다.<br><br> 텔레그램으로 문의 주세요.</h2>
  <p class="section5-text">골드스타와 함께 새로운 투자의 기회를 시작하세요</p>
        <div class="contact-buttons">
          <a href="#" class="kakao-link"><img src="img/카카오톡 문의.gif" alt="카카오톡 문의"/></a>
          <a href="https://t.me/Goldstar_Korea" target="_blank" rel="noopener"><img src="img/텔레그램 문의.gif" alt="텔레그램 문의"/></a>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="company-info">
      <div class="info-content">
        <div class="company-info-grid">
          <div class="info-section">
            <h3>회사 정보</h3>
            <p>상호명: 골드스타</p>
            <p>대표이사: 이희철</p>
            <p>사업자등록번호: 530-36-00757</p>
            <p>주소: 서울특별시 강남대로 584 성일빌딩</p>
          </div>
          <div class="info-section">
            <h3>고객지원</h3>
            <p>운영시간: 평일 09:00 - 18:00</p>
            <p>점심시간: 12:00 - 13:00</p>
            <p>토/일/공휴일 휴무</p>
            <p><카카오톡, 텔레그램 문의는 휴무 관계없이 문의 가능합니다.></p>
          </div>
        </div>
      </div>
    </footer>
  </main>

  <script src="hover-gif.js"></script>
  <script src="app.js"></script>
  <script>
  // 카카오톡 문의 클릭 시 "준비중입니다." 알림
  document.addEventListener('DOMContentLoaded', function() {
    document.querySelectorAll('.kakao-link').forEach(el => {
      el.addEventListener('click', function(e) {
        e.preventDefault();
        alert('준비중입니다.');
      });
    });
  });
// 모든 fadein 요소에 Intersection Observer로 디졸브 효과 적용
document.addEventListener('DOMContentLoaded', function(){
  const fadeEls = document.querySelectorAll('.fadein');
  const mainFade = document.getElementById('mainFadein');
  if(mainFade) {
    setTimeout(()=>mainFade.classList.add('visible'), 400); // 인트로 오버레이 이후 페이드인
  }
  const observer = new IntersectionObserver((entries)=>{
    entries.forEach(entry=>{
      if(entry.isIntersecting){
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.3 });
  fadeEls.forEach(el=>{
    observer.observe(el);
  });
});
    // 로그인 상태에 따라 네비게이션 바 버튼 제어
    function updateNavForAdmin() {
      var isAdmin = !!localStorage.getItem('admin_session_v1');
      var signupBtn = document.getElementById('signupBtn');
      var loginBtn = document.getElementById('loginBtn');
      var adminBtn = document.getElementById('adminReturnBtn');
      if (isAdmin) {
        if (signupBtn) signupBtn.style.display = 'none';
        if (loginBtn) loginBtn.style.display = 'none';
        if (adminBtn) adminBtn.style.display = 'inline-flex';
      } else {
        if (signupBtn) signupBtn.style.display = '';
        if (loginBtn) loginBtn.style.display = '';
        if (adminBtn) adminBtn.style.display = 'none';
      }
    }
    document.addEventListener('DOMContentLoaded', function() {
      updateNavForAdmin();
      var adminBtn = document.getElementById('adminReturnBtn');
      if (adminBtn) {
        adminBtn.addEventListener('click', function() {
          window.location.href = 'admin/index.html';
        });
      }
    });
    // 로그인/로그아웃 시에도 updateNavForAdmin()을 호출해야 함 (app.js에서 처리 가능)
  </script>
  <script>
// Intro overlay: GIF 1회만 보여주고 2초 후 ESC 효과 및 마지막 1초에 페이드아웃 디졸브 (총 3초만 재생)
// 네비게이션 로고 클릭 시 항상 홈(index.html)으로 이동
document.addEventListener('DOMContentLoaded', function() {
  var homeLogo = document.getElementById('homeLogo');
  if(homeLogo) {
    homeLogo.addEventListener('click', function(e) {
      e.preventDefault();
      window.location.href = 'index.html';
    });
  }
});

// Intro overlay: GIF 1회만 보여주고 4초 후 페이드아웃, 새로고침 없이 사라짐
(function(){
  const overlay=document.getElementById('introOverlay');
  const img=document.getElementById('introGif');
  if(!overlay||!img) return;
  // 세션 기준 1회만 보여주고, 이후엔 바로 숨김
  const played=sessionStorage.getItem('intro_played_v10');
  if(played){ overlay.style.display='none'; document.body.style.overflow=''; document.documentElement.style.overflow=''; return; }
  function hideIntro(){
    overlay.classList.add('hidden');
    setTimeout(()=>{
      if(img) img.remove();
      overlay.style.display='none';
      document.body.style.overflow='';
      document.documentElement.style.overflow='';
      sessionStorage.setItem('intro_played_v10','1');
    }, 1000); // 디졸브 효과 1초
  }
  document.documentElement.style.overflow='hidden';
  document.body.style.overflow='hidden';
  setTimeout(hideIntro, 4000); // 4초 후 자동 페이드아웃
  overlay.addEventListener('click', hideIntro);
})();
  </script>
  <script>
    // Extra best-effort content protection for this page
    document.addEventListener('contextmenu', e=> e.preventDefault());
    document.addEventListener('dragstart', e=> e.preventDefault());
    document.addEventListener('copy', e=> { e.clipboardData?.setData('text/plain',''); e.preventDefault(); });
    document.addEventListener('keydown', e=>{
      if((e.ctrlKey||e.metaKey) && ['s','p','u','c'].includes(e.key.toLowerCase())) e.preventDefault();
      if(e.key==='F12' || (e.ctrlKey && e.shiftKey && ['I','i','J','j','C','c'].includes(e.key))) e.preventDefault();
    });
    document.addEventListener('DOMContentLoaded',()=>{ document.querySelectorAll('img,video').forEach(el=>{ el.setAttribute('draggable','false'); el.setAttribute('oncontextmenu','return false'); }); });
    // ===== 네비게이션 스크롤 페이드 (아래 스크롤시 위로 디졸브 사라짐, 맨 위 복귀시 페이드 인) =====
    (function(){
      let lastY = window.scrollY;
      const nav = document.getElementById('navbar');
      const thresholdHide = 40; // 조금만 내려도 숨김 시작
      let forcedShow = false;
      function handleScroll(){
        if(forcedShow){return;} // 마우스 최상단 강제 표시 상태
        const y = window.scrollY;
        if (y > thresholdHide) {
          if (y > lastY) { // 아래로
            nav.classList.add('nav-hidden');
          } else { // 위로 올림
            nav.classList.remove('nav-hidden');
          }
        } else {
          nav.classList.remove('nav-hidden');
        }
        lastY = y;
      }
      window.addEventListener('scroll', handleScroll);
      // 마우스가 화면 최상단(예: 24px) 영역에 들어오면 네비게이션 표시
      window.addEventListener('mousemove', e => {
        if (e.clientY <= 24) {
          forcedShow = true;
          nav.classList.remove('nav-hidden');
          // 1.5초 후 스크롤 방향 다시 적용
          clearTimeout(window.__navForceTimer);
          window.__navForceTimer = setTimeout(()=>{ forcedShow=false; handleScroll(); },1500);
        }
      });
    })();

    // 메뉴 토글
  const menuBtn = document.querySelector('.menu-btn');
  const navLinks = document.querySelector('.nav-links');
    menuBtn.addEventListener('click', () => {
      menuBtn.classList.toggle('active');
      navLinks.classList.toggle('active');
    });
    document.querySelectorAll('a[href^="#"]').forEach(a => {
      a.addEventListener('click', e => {
        const t = document.querySelector(a.getAttribute('href'));
        if (t) {
          e.preventDefault();
          t.scrollIntoView({ behavior:'smooth', block:'start' });
        }
      });
    });
    document.querySelectorAll('.nav-links a').forEach(l => {
      l.addEventListener('click', () => {
        menuBtn.classList.remove('active');
        navLinks.classList.remove('active');
      });
    });

  // 스크롤탑
  document.getElementById('scrollToTop').addEventListener('click', () => {
      window.scrollTo({ top:0, behavior:'smooth' });
    });

  // 테마 제거됨

    // 스크롤 진행률
    const bar = document.getElementById('scroll-progress');
    function updateBar() {
      const s = window.pageYOffset || document.documentElement.scrollTop;
      const dh = document.documentElement.scrollHeight - window.innerHeight;
      bar.style.width = dh ? (s/dh*100)+'%' : '0%';
    }
    window.addEventListener('scroll', updateBar);
    window.addEventListener('resize', updateBar);
    document.addEventListener('DOMContentLoaded', updateBar);

    // 금 시세 API & 렌더링
  const API_URL   = 'https://gold-price-proxy.hanoiosaka1.workers.dev/price';
  const fmt = n => Number(n).toLocaleString('ko-KR');

  async function renderGoldPrice(){
    const priceEl  = document.getElementById('mainPrice');
    const changeEl = document.getElementById('priceChange');
    const supplyEl = document.querySelector('.supply-price');
    const supplyCh = document.querySelector('.supply-footer .change-line');

    try {
      // 1) KV에서 goldprice 값 확인
      const kvRes = await fetch('/api/security?type=goldprice');
      const kvJson = await kvRes.json();
      const manual = kvJson && kvJson.manualGoldPrice ? Number(kvJson.manualGoldPrice) : 0;

      let basePrice = 0;

      if (manual > 0) {
        // KV값 우선 반영
        basePrice = manual;
        priceEl.textContent = fmt(manual) + '원';
      } else {
        // 2) KV 값이 없으면 자동 크롤링 값 사용
        const d = await fetch(API_URL).then(r=>r.json());
        if (d && d.price) {
          basePrice = d.price;
          priceEl.textContent = fmt(d.price) + '원';
          const arrow = d.trend==='up' ? '▲' : d.trend==='down' ? '▼' : '';
          const pct   = d.percent || '';
          const chg   = d.change ? fmt(d.change)+'원' : '';
          changeEl.textContent = [arrow, pct, chg].filter(Boolean).join(' ');
          changeEl.className = 'change-line' + (d.trend==='up'? ' up': d.trend==='down'? ' down':'');
        }
      }

      // 3) 공급가 대비 퍼센트만 표시
      if (supplyEl && supplyCh && basePrice > 0) {
        const supplyVal = Number(supplyEl.textContent.replace(/[^0-9]/g,''));
        if (supplyVal > 0) {
          const rate = (basePrice - supplyVal)/basePrice*100;
          const sign = rate > 0 ? '▼' : '▲';
          const absPct = Math.abs(rate).toFixed(2) + '%';
          supplyCh.textContent = `${sign} ${absPct}`;   // ✅ 퍼센트만 표시
          supplyCh.className = 'change-line ' + (rate > 0 ? 'down' : 'up');
        }
      }
    } catch (e) {
      priceEl.textContent = '–';
      changeEl.textContent = '';
    }
  }

  document.addEventListener('DOMContentLoaded', renderGoldPrice);

    // Section2: Carousel + 설명글 자동 생성
    // — 최대 20개, VISIBLE_COUNT만큼만 표시
    const MAX_ITEMS = 20;
    const VISIBLE_COUNT = 13; // 1~MAX_ITEMS 사이의 값으로 조정하세요

  document.addEventListener('DOMContentLoaded', () => {
      const items = [
        { img: 'section_1.jpg',  desc: '우간다 황금의 첫 걸음 — 땅속에서 피어나는 기회의 빛' },
        { img: 'section_2.jpg',  desc: '지하 암석 속 황금의 길 — 끝없는 도전' },
        { img: 'section_3.jpg',  desc: '대지 위에 펼쳐진 생명의 광맥 — 공동의 땀과 노력' },
        { img: 'section_4.jpg',  desc: '노동의 힘이 계약이 되고, 희망이 된다 1' },
        { img: 'section_5.jpg',  desc: '노동의 힘이 계약이 되고, 희망이 된다 2' },
        { img: 'section_6.jpg',  desc: '붉은 대지에서 피어나는 황금의 열정' },
        { img: 'section_7.jpg',  desc: '황토빛 물에서 캐내는 삶의 원천' },
        { img: 'section_8.jpg',  desc: '함께하는 손길이 만드는 황금의 미래' },
        { img: 'section_9.jpg',  desc: '첨단 기술이 더하는 가치 — 금의 새로운 시대' },
        { img: 'section_10.jpg', desc: '노력의 황금의 결실에 대한 섬세한 성분 검사' },
        { img: 'section_11.jpg', desc: '황금의 결실 — 우간다 땅에서 피어난 부와 가치' },
        { img: 'section_12.jpg', desc: '안전 속에서 지켜낸 자원 — 책임 있는 채굴' },
        { img: 'section_13.jpg', desc: '공식적인 계약과 약속 — 신뢰로 세워가는 황금의 미래' },
        { img: 'section_14.jpg', desc: '사진14' },
        { img: 'section_15.jpg', desc: '사진15' },
        { img: 'section_16.jpg', desc: '사진16' },
        { img: 'section_17.jpg', desc: '사진17' },
        { img: 'section_18.jpg', desc: '사진18' },
        { img: 'section_19.jpg', desc: '사진19' },
        { img: 'section_20.jpg', desc: '사진20' }
      ];

      const track = document.getElementById('carousel-track');
      const count = Math.min(VISIBLE_COUNT, MAX_ITEMS, items.length);

      items.slice(0, count).forEach(item => {
        // 이미지와 설명 모두 있을 때만 렌더링
        if (item.img) {
          const div = document.createElement('div');
          div.className = 'carousel-item';
          const imgEl = document.createElement('img');
          imgEl.src = `img/${item.img}`;
          imgEl.alt = item.desc;
          const p = document.createElement('p');
          p.textContent = item.desc;
          div.append(imgEl, p);
          track.append(div);
        }
      });

  // 무한 루프를 위해 복제
  track.innerHTML += track.innerHTML;
    });

    // (i18n & user nav handled by app.js) — 보조 보장 로직
    document.addEventListener('DOMContentLoaded', () => {
      // app.js 비동기 초기화 후 사용자 버튼 강제 재구성 (지연 보장)
      function safeBuild(){
        if(window.GSApp && typeof window.GSApp.buildUserNav === 'function'){
          window.GSApp.buildUserNav();
        }
      }
      safeBuild();
      setTimeout(safeBuild, 300);
      setTimeout(safeBuild, 1000);
  // 테마 기능 삭제됨
    });
  </script>
  <!-- 섹션3 GIF 자동재생 관련 JS 완전 삭제됨 -->

</body>
</html>
 위해 복제
  track.innerHTML += track.innerHTML;
    });

    // (i18n & user nav handled by app.js) — 보조 보장 로직
    document.addEventListener('DOMContentLoaded', () => {
      // app.js 비동기 초기화 후 사용자 버튼 강제 재구성 (지연 보장)
      function safeBuild(){
        if(window.GSApp && typeof window.GSApp.buildUserNav === 'function'){
          window.GSApp.buildUserNav();
        }
      }
      safeBuild();
      setTimeout(safeBuild, 300);
      setTimeout(safeBuild, 1000);
  // 테마 기능 삭제됨
    });
  </script>
  <!-- 섹션3 GIF 자동재생 관련 JS 완전 삭제됨 -->

</body>
</html>

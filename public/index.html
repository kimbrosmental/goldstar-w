<!DOCTYPE html>
<html lang="ko" id="top">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>회사 홈페이지</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
</head>
<body>
  <nav id="navbar">
    <div class="container">
        <div class="logo">
            <img src="img/logo.png" alt="골드스타 로고">
        </div>
        <div class="menu-btn">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <ul class="nav-links">
          <li><a href="#section1">섹션 1</a></li>
          <li><a href="#section2">섹션 2</a></li>
          <li><a href="#section3">섹션 3</a></li>
          <li><a href="#section4">섹션 4</a></li>
          <li><a href="#section5">섹션 5</a></li>
        </ul>
    </div>
    <div id="scroll-progress"></div>
  </nav>

  <button id="scrollToTop">
      <i class="fas fa-arrow-up"></i>
  </button>

  <div class="fixed-social-icons">
    <a href="#" class="social-icon">
        <img src="img/카카오톡 문의.png" alt="카카오톡 상담" class="kakao-static">
        <img src="img/카카오톡 문의2.gif" alt="카카오톡 상담" class="kakao-hover">
    </a>
  </div>

  <main>
    <section id="section1" class="section">
        <div class="content">
            <div class="hero-content">
                <h1>우간다에서 시작된 기회,<br>한국에서 금이 싸진다.</h1>
                <p class="subtitle">글로벌 금맥을 잇는 새로운 연결, 지금 당신이 만날 수 있습니다.</p>
                <div class="hero-image">
                    <img src="img/uganda-gold-map.png" alt="우간다 금광 지도">
                </div>
            </div>

            <!-- ================== 오늘의 금 시세 박스 ================== -->
            <div class="price-box" id="priceBox">
              <h2 class="price-title">오늘의 금 시세</h2>
              <div id="mainPrice" class="main-price">로딩중…</div>
              <div id="priceChange" class="change-line"></div>
              <div id="lastUpdated" class="price-updated"></div>
            </div>
            <!-- ====================================================== -->

        </div>
    </section>

    <section id="section2" class="section">
        <div class="content">
            <div class="story-content">
                <h2>검은 대륙의 금맥</h2>
                <div class="story-grid">
                    <div class="story-item">
                        <h3>3,200톤</h3>
                        <p>2023년 우간다 금 매장량 발견</p>
                    </div>
                    <div class="story-item">
                        <h3>글로벌 주목</h3>
                        <p>CNN, BBC 등 해외 언론 집중 보도</p>
                    </div>
                    <div class="story-item">
                        <h3>독점 계약</h3>
                        <p>중국 광산업체들과 채굴 독점 계약 체결</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="section3" class="section">
        <div class="content">
            <div class="process-content">
                <h2>유통 구조의 혁신</h2>
                <div class="process-flow">
                    <div class="process-step">
                        <img src="img/mining.jpg" alt="채굴">
                        <p>우간다 금 매장지</p>
                    </div>
                    <div class="process-step">
                        <img src="img/transport.jpg" alt="운송">
                        <p>실시간 금 운송/수입</p>
                    </div>
                    <div class="process-step">
                        <img src="img/delivery.jpg" alt="공급">
                        <p>플랫폼 회원 공동 공급</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="section4" class="section">
        <div class="content">
            <div class="achievement-content">
                <h2>실제 공급 성과</h2>
                <div class="achievement-grid">
                    <div class="achievement-item">
                        <h3>192kg</h3>
                        <p>총 공급 완료량</p>
                    </div>
                    <div class="achievement-item">
                        <h3>13.4%</h3>
                        <p>시세 대비 평균 할인율</p>
                    </div>
                    <div class="achievement-item">
                        <h3>1,982명</h3>
                        <p>누적 참여 회원</p>
                    </div>
                </div>
                <div class="testimonials">
                    <img src="img/gold-delivery.jpg" alt="실제 금괴 배송">
                </div>
            </div>
        </div>
    </section>

    <section id="section5" class="section">
        <div class="content center">
            <h2>지금 바로 문의하세요</h2>
            <p>골드스타와 함께 새로운 투자의 기회를 시작하세요</p>
            <div class="contact-buttons">
                <a href="#"><img src="img/카카오톡 문의.gif" alt="카카오톡 문의"/></a>
                <a href="#"><img src="img/텔레그램 문의.gif" alt="텔레그램 문의"/></a>
            </div>
        </div>
    </section>
  </main>

  <footer class="company-info">
      <div class="info-content">
          <div class="company-info-grid">
              <div class="info-section">
                  <h3>회사 정보</h3>
                  <p>상호명: 골드스타</p>
                  <p>대표이사: 홍길동</p>
                  <p>사업자등록번호: 123-45-67890</p>
                  <p>통신판매업: 제2025-서울강남-0000호</p>
              </div>
              <div class="info-section">
                  <h3>연락처</h3>
                  <p>주소: 서울특별시 강남구 테헤란로 123</p>
                  <p>대표전화: 02-1234-5678</p>
                  <p>이메일: info@goldstar.com</p>
                  <p>팩스: 02-1234-5679</p>
              </div>
              <div class="info-section">
                  <h3>고객지원</h3>
                  <p>운영시간: 평일 09:00 - 18:00</p>
                  <p>점심시간: 12:00 - 13:00</p>
                  <p>토/일/공휴일 휴무</p>
              </div>
          </div>
      </div>
  </footer>

  <!-- 자바스크립트 파일 연결 -->
  <script src="hover-gif.js"></script>

  <!-- 모바일 메뉴 토글 스크립트 -->
  <script>
      const menuBtn = document.querySelector('.menu-btn');
      const navLinks = document.querySelector('.nav-links');
      
      menuBtn.addEventListener('click', () => {
        menuBtn.classList.toggle('active');
        navLinks.classList.toggle('active');
      });
  </script>

  <!-- 부드러운 앵커 스크롤 -->
  <script>
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          e.preventDefault();
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      });
    });
  </script>

  <!-- 메뉴 클릭 시 닫기 -->
  <script>
      document.querySelectorAll('.nav-links a').forEach(link => {
        link.addEventListener('click', () => {
          menuBtn.classList.remove('active');
          navLinks.classList.remove('active');
        });
      });
  </script>

  <!-- 맨위로 버튼 스크롤 동작 추가 -->
  <script>
    const scrollToTopBtn = document.getElementById('scrollToTop');
    scrollToTopBtn.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
  </script>

<!-- ================= 금 시세 파싱 & 캐시 ================= -->
<script>
  const API_URL  = '/price';      // 위 PHP 파일 경로
  const CACHE_KEY = 'gold_price_cache_v1';

  function getCache(){
    try{ return JSON.parse(localStorage.getItem(CACHE_KEY)); }catch(e){ return null; }
  }
  function setCache(d){
    try{ localStorage.setItem(CACHE_KEY, JSON.stringify(d)); }catch(e){}
  }

  function renderPrice(data, fromCache=false){
    const priceEl  = document.getElementById('mainPrice');
    const changeEl = document.getElementById('priceChange');
    const timeEl   = document.getElementById('lastUpdated');

    priceEl.textContent = data?.price ? data.price + '원' : '–';

    const arrow = data?.trend === 'up' ? '▲' : data?.trend === 'down' ? '▼' : '';
    changeEl.textContent = data?.percent ? `${arrow} ${data.percent}` : '';
    changeEl.className = 'change-line' + (data?.trend==='up'?' up':data?.trend==='down'?' down':'');

    if (data?.updatedAt) {
      const d = new Date(data.updatedAt);
      const pad = n => String(n).padStart(2,'0');
      timeEl.textContent =
        `최근 업데이트: ${d.getFullYear()}-${pad(d.getMonth()+1)}-${pad(d.getDate())} `
        + `${pad(d.getHours())}:${pad(d.getMinutes())}` + (fromCache?' (캐시)':'');
    } else {
      timeEl.textContent = '';
    }
  }

  async function loadGoldPrice(){
    // 캐시 먼저
    const cache = getCache();
    if(cache) renderPrice(cache, true);

    try{
      const data = await fetch(API_URL, {cache:'no-store'}).then(r=>r.json());
      if(!data.price) throw new Error('parse_fail');
      renderPrice(data, false);
      setCache(data);
    }catch(e){
      // 실패해도 에러 문구 없음. 캐시 있으면 그대로 유지.
      if(!cache){
        renderPrice({price:null, percent:null, trend:'flat', updatedAt:null}, true);
      }
    }
  }

  document.addEventListener('DOMContentLoaded', loadGoldPrice);
</script>
<!-- ======================================================= -->

</body>
</html>

<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>ê´€ë¦¬ì í˜ì´ì§€</title>
  <link rel="stylesheet" href="style.css"/>
  <style>
    body{padding-top:100px;}
    .admin-wrap{max-width:none;width:100%;margin:0 auto;color:#fff;padding:20px 30px 80px;}
    h1{font-size:34px;margin-bottom:24px;color:#FFD700;}
    .btn{background:#00695C;color:#fff;border:none;padding:10px 16px;border-radius:8px;font-size:14px;cursor:pointer;}
    .btn:hover{background:#00897B;}
    .btn.active{background:#00897B;box-shadow:0 0 0 2px rgba(255,215,0,.3) inset;}
    .tabs{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0 12px;}
    .right-tools{display:flex;gap:8px;align-items:center;margin-left:auto;}
    .headbar{display:flex;gap:14px;align-items:center;flex-wrap:wrap;margin:6px 0 14px;}
    #adminContent{border:1px solid #1e4d47;border-radius:12px;overflow:auto;background:#0c1a18;max-height:75vh;padding:16px;}
    .hint{color:#9ec9c3;font-size:12px;margin:8px 0 0;}
    .pill{display:inline-block;padding:2px 6px;border-radius:12px;background:#1e4d47;font-size:11px;margin-left:4px;}
    .flex{display:flex;gap:16px;flex-wrap:wrap;}
    .detail-box{background:#0c1a18;border:1px solid #1e4d47;border-radius:10px;padding:14px;}
  </style>
</head>
<body>
<nav id="navbar">
  <div class="container">
    <div class="logo"><img src="img/logo.png" alt="logo"/></div>
    <div class="nav-center">
      <ul class="nav-links">
        <li><a href="index.html#section1">ì†Œê°œ</a></li>
        <li><a href="index.html#section2">ì§„í–‰</a></li>
        <li><a href="index.html#section3">ì˜ìƒ</a></li>
        <li><a href="index.html#section4">ì´ë ¥</a></li>
        <li><a href="index.html#section5">ë¬¸ì˜</a></li>
      </ul>
    </div>
    <div class="nav-right">
      <div id="userArea" class="user-area"></div>
      <a href="index.html" class="home-icon" aria-label="í™ˆ" style="display:flex;align-items:center;justify-content:center;width:56px;height:56px;background:#004d40;border-radius:16px;border:2px solid #00695C;transition:.3s;text-decoration:none;"><span style="font-size:30px;color:#FFD700;">ğŸ </span></a>
      <div class="menu-btn" aria-label="ë©”ë‰´" role="button" tabindex="0"><span></span><span></span><span></span></div>
    </div>
  </div>
</nav>
<main>
  <div class="admin-wrap">
    <h1>ê´€ë¦¬ì í˜ì´ì§€</h1>
    <div class="headbar">
      <div class="tabs" role="tablist" aria-label="Admin Tabs">
        <button class="btn active" id="tabUsers" type="button" role="tab" aria-selected="true" style="min-width:140px;display:inline-flex;align-items:center;justify-content:center;gap:8px;">
          <span>ğŸ‘¤</span><span data-i18n="tab_users_admin">íšŒì› ê´€ë¦¬</span>
        </button>
        <button class="btn" id="tabOrders" type="button" role="tab" aria-selected="false" style="min-width:140px;display:inline-flex;align-items:center;justify-content:center;gap:8px;">
          <span>ğŸ§¾</span><span data-i18n="section_orders_admin">ì£¼ë¬¸ ê´€ë¦¬</span>
        </button>
        <button class="btn" id="tabInquiries" type="button" role="tab" aria-selected="false" style="min-width:160px;display:inline-flex;align-items:center;justify-content:center;gap:8px;position:relative;">
          <span>ğŸ’¬</span><span data-i18n="section_messages_admin">1:1 ë¬¸ì˜</span>
          <span id="newBadge" class="pill" style="display:none;position:absolute;top:-8px;right:-8px;background:#b71c1c;color:#fff;">NEW</span>
        </button>
      </div>
      <div class="right-tools">
        <button class="btn" id="btnChangePw" data-i18n="btn_change_admin_password">ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
        <button class="btn danger" id="btnLogout" type="button">ë¡œê·¸ì•„ì›ƒ</button>
        <span id="pwChangeMsg" class="hint"></span>
      </div>
    </div>
    <div id="adminContent"></div>
  </div>
</main>
<script>
// ê° ì˜ì—­ë³„ HTML í…œí”Œë¦¿
const usersHTML = `
  <h2 style=\"margin:0 0 10px;\">íšŒì› ê´€ë¦¬</h2>
  <div id=\"adminInfo\" class=\"detail-box\" style=\"margin-bottom:14px;\"></div>
  <div class=\"flex\" style=\"align-items:flex-start;\"> ...íšŒì›ê´€ë¦¬ ì˜ì—­... </div>
`;
const ordersHTML = `
  <h2 style=\"margin:0 0 10px;\">ì£¼ë¬¸ ê´€ë¦¬</h2>
  <div id=\"adminInfo\" class=\"detail-box\" style=\"margin-bottom:14px;\"></div>
  <div class=\"flex\" style=\"align-items:flex-start;\"> ...ì£¼ë¬¸ê´€ë¦¬ ì˜ì—­... </div>
`;
const inquiriesHTML = `
  <h2 style=\"margin:0 0 10px;\">1:1 ë¬¸ì˜ ê´€ë¦¬</h2>
  <div id=\"adminInfo\" class=\"detail-box\" style=\"margin-bottom:14px;\"></div>
  <div class=\"flex\" style=\"align-items:flex-start;\"> ...ë¬¸ì˜ê´€ë¦¬ ì˜ì—­... </div>
`;
const adminContent = document.getElementById('adminContent');
function setActiveTab(tab) {
  [tabUsers, tabOrders, tabInquiries].forEach(t => t.classList.remove('active'));
  tab.classList.add('active');
}
function showUsers() {
  setActiveTab(tabUsers);
  adminContent.innerHTML = usersHTML;
}
function showOrders() {
  setActiveTab(tabOrders);
  adminContent.innerHTML = ordersHTML;
}
function showInquiries() {
  setActiveTab(tabInquiries);
  adminContent.innerHTML = inquiriesHTML;
}
const tabUsers = document.getElementById('tabUsers');
const tabOrders = document.getElementById('tabOrders');
const tabInquiries = document.getElementById('tabInquiries');
tabUsers.addEventListener('click', showUsers);
tabOrders.addEventListener('click', showOrders);
tabInquiries.addEventListener('click', showInquiries);
showUsers();
</script>

    function setActiveTab(tab) {
      [tabUsers, tabOrders, tabInquiries].forEach(t => t.classList.remove('active'));
      tab.classList.add('active');
    }

    // íšŒì›ê´€ë¦¬ íƒ­
    function showUsers() {
      setActiveTab(tabUsers);
      adminContent.innerHTML = `
        <h2 style="margin:0 0 10px;">íšŒì› ê´€ë¦¬</h2>
        <div id="adminInfo" class="detail-box" style="margin-bottom:14px;"></div>
        <div class="flex" style="align-items:flex-start;">
          <div style="flex:1;min-width:420px;">
            <div style="display:flex;align-items:center;gap:8px;justify-content:space-between;">
              <h2 style="margin:0;">íšŒì› ëª©ë¡</h2>
              <button id="btnUsersRefresh" class="btn small" style="padding:6px 10px;">ìƒˆë¡œê³ ì¹¨</button>
              <button id="btnExportCsv" class="btn small" style="padding:6px 10px;">CSV ë‚´ë³´ë‚´ê¸°</button>
            </div>
            <div id="usersTable" class="scroll"></div>
          </div>
          <div style="flex:1;min-width:420px;">
            <h2>ìƒì„¸/ê´€ë¦¬</h2>
            <div id="detail" class="detail-box" style="min-height:280px;"></div>
            <div class="toolbar">
              <button class="btn" id="btnCreateUser">íšŒì› ì¶”ê°€</button>
              <button class="btn" id="btnEditUser">ìˆ˜ì •</button>
              <button class="btn" id="btnSaveUser" style="display:none;">ì €ì¥</button>
              <button class="btn danger" id="btnDeleteUser">ì‚­ì œ</button>
            </div>
            <div id="msgUser" class="subtle" style="margin-top:6px;"></div>
          </div>
        </div>
      `;
      renderAdminInfo();
      renderUsers();
      renderDetail();
      bindUserEvents();
    }

    // íšŒì›ê´€ë¦¬ ê¸°ëŠ¥ ë³€ìˆ˜ ë° í•¨ìˆ˜ ë³µêµ¬
    let selectedEmail = null;
    let editMode = false;
    let createMode = false;

    function renderAdminInfo() {
      const box = document.getElementById('adminInfo');
      if (!box) return;
      const admin = GSApp.currentUser();
      if (!admin) { box.innerHTML = ''; return; }
      const online = admin.lastSeenAt && (Date.now() - admin.lastSeenAt < 5 * 60 * 1000);
      box.innerHTML = `
        <h3 style='margin:0 0 8px;'>ê´€ë¦¬ì ì •ë³´</h3>
        <div class='detail-grid'>
          <div>ì•„ì´ë””</div><div>${admin.username || ''}</div>
          <div>ì´ë©”ì¼</div><div>${admin.email}</div>
          <div>ì ‘ì†ìƒíƒœ</div><div>${online ? '<span class="pill" style="background:#2e7d32;color:#fff;">ì˜¨ë¼ì¸</span>' : '<span class="pill">ì˜¤í”„ë¼ì¸</span>'}</div>
          <div>ë§ˆì§€ë§‰ ì ‘ì†</div><div>${admin.lastLoginAt ? new Date(admin.lastLoginAt).toLocaleString('ko-KR') : '-'}</div>
          <div>ìµœê·¼ í™œë™</div><div>${admin.lastSeenAt ? new Date(admin.lastSeenAt).toLocaleString('ko-KR') : '-'}</div>
          <div>ì ‘ì† IP</div><div>${admin.lastLoginIP || '-'}</div>
          <div>ë¸Œë¼ìš°ì €</div><div style='white-space:nowrap;overflow:hidden;text-overflow:ellipsis;'>${admin.lastLoginUA || '-'}</div>
        </div>
      `;
    }

    function renderUsers() {
      const db = GSApp.getDB();
      const rows = Object.values(db.users).map(u => `
        <tr class='row-user ${selectedEmail === u.email ? 'selected' : ''}' data-email='${u.email}'>
          <td>${u.username || ''}</td>
          <td>${u.email}${u.role === 'admin' ? '<span class="pill">admin</span>' : ''}</td>
          <td>${u.name || ''}</td>
          <td>${u.phone || ''}</td>
          <td>${(u.orders || []).length}</td>
        </tr>
      `).join('');
      document.getElementById('usersTable').innerHTML = `<table><thead><tr><th>ì•„ì´ë””</th><th>ì´ë©”ì¼</th><th>ì´ë¦„</th><th>ì—°ë½ì²˜</th><th>ì£¼ë¬¸ìˆ˜</th></tr></thead><tbody>${rows}</tbody></table>`;
      document.querySelectorAll('.row-user').forEach(tr => tr.addEventListener('click', () => {
        selectedEmail = tr.dataset.email;
        createMode = false;
        editMode = false;
        renderDetail();
        renderUsers();
        // updateDeleteVisibility();
      }));
      if (window.GSApp) GSApp.applyLang();
    }

    function renderDetail() {
      const box = document.getElementById('detail');
      if (createMode) {
        box.innerHTML = `
          <h3 style='margin:0 0 10px;'>ì‹ ê·œ íšŒì› ì¶”ê°€</h3>
          <div class='detail-grid'>
            <label>ì•„ì´ë””</label><input id='f_username' placeholder='ì•„ì´ë””'/>
            <label>ì´ë¦„</label><input id='f_name' placeholder='ì´ë¦„'/>
            <label>ì´ë©”ì¼</label><input id='f_email' placeholder='ì´ë©”ì¼'/>
            <label>ì—°ë½ì²˜</label><input id='f_phone' placeholder='ì—°ë½ì²˜'/>
            <label>ìƒë…„ì›”ì¼</label><input id='f_birth' type='date'/>
            <label>ì€í–‰</label><input id='f_bank' placeholder='ì€í–‰'/>
            <label>ê³„ì¢Œ</label><input id='f_account' placeholder='ê³„ì¢Œë²ˆí˜¸'/>
            <label>ë¹„ë°€ë²ˆí˜¸</label><input id='f_password' type='password' placeholder='ë¹„ë°€ë²ˆí˜¸'/>
          </div>
          <button class='btn' id='btnSaveUser'>ì €ì¥</button>
        `;
        document.getElementById('btnSaveUser').addEventListener('click', async () => {
          const username = document.getElementById('f_username').value.trim();
          const name = document.getElementById('f_name').value.trim();
          const email = document.getElementById('f_email').value.trim().toLowerCase();
          const phone = document.getElementById('f_phone').value.trim();
          const birth = document.getElementById('f_birth').value;
          const bank = document.getElementById('f_bank').value.trim();
          const account = document.getElementById('f_account').value.trim();
          const password = document.getElementById('f_password').value || 'temp1234';
          if (!username || !name || !email || !phone || !birth) { alert('í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”.'); return; }
          try {
            await GSApp.signupUser({ username, name, birth, phone, email, bank, account, password });
            await GSApp.loadDB();
            createMode = false;
            selectedEmail = email;
            renderUsers();
            renderDetail();
          } catch(e) { alert(e.message || 'ì˜¤ë¥˜'); }
        });
        return;
      }
      if (!selectedEmail) {
        box.innerHTML = `<div class='muted'>ì¢Œì¸¡ì—ì„œ íšŒì›ì„ ì„ íƒí•˜ì„¸ìš”.</div>`;
        return;
      }
      const db = GSApp.getDB();
      const user = db.users[selectedEmail];
      if (!user) { box.innerHTML = `<div class='muted'>íšŒì› ì •ë³´ ì—†ìŒ</div>`; return; }
      box.innerHTML = `
        <h3 style='margin:0 0 10px;'>íšŒì› ìƒì„¸</h3>
        <div class='detail-grid'>
          <label>ì•„ì´ë””</label><div>${user.username || ''}</div>
          <label>ì´ë¦„</label><div>${user.name || ''}</div>
          <label>ì´ë©”ì¼</label><div>${user.email}</div>
          <label>ì—°ë½ì²˜</label><div>${user.phone || ''}</div>
          <label>ì£¼ë¬¸ìˆ˜</label><div>${(user.orders || []).length}</div>
        </div>
        <button class='btn' id='btnEditUser'>ìˆ˜ì •</button>
        <button class='btn danger' id='btnDeleteUser'>ì‚­ì œ</button>
      `;
      document.getElementById('btnEditUser').addEventListener('click', () => {
        editMode = true;
        renderDetail();
      });
      document.getElementById('btnDeleteUser').addEventListener('click', async () => {
        if (!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
        await GSApp.deleteUser(selectedEmail);
        await GSApp.saveDB();
        await GSApp.loadDB();
        selectedEmail = null;
        renderUsers();
        renderDetail();
      });
      if (editMode) {
        box.innerHTML = `
          <h3 style='margin:0 0 10px;'>íšŒì› ì •ë³´ ìˆ˜ì •</h3>
          <div class='detail-grid'>
            <label>ì•„ì´ë””</label><input id='f_username' value='${user.username || ''}' disabled/>
            <label>ì´ë¦„</label><input id='f_name' value='${user.name || ''}'/>
            <label>ì´ë©”ì¼</label><input id='f_email' value='${user.email}' disabled/>
            <label>ì—°ë½ì²˜</label><input id='f_phone' value='${user.phone || ''}'/>
            <label>ìƒë…„ì›”ì¼</label><input id='f_birth' type='date' value='${user.birth || ''}'/>
            <label>ì€í–‰</label><input id='f_bank' value='${user.bank || ''}'/>
            <label>ê³„ì¢Œ</label><input id='f_account' value='${user.account || ''}'/>
            <label>ìƒˆ ë¹„ë°€ë²ˆí˜¸</label><input id='f_newpw' type='password' placeholder='ë³€ê²½ ì‹œì—ë§Œ ì…ë ¥'/>
          </div>
          <button class='btn' id='btnSaveUser'>ì €ì¥</button>
          <button class='btn' id='btnCancelEdit'>ì·¨ì†Œ</button>
        `;
        document.getElementById('btnSaveUser').addEventListener('click', async () => {
          const name = document.getElementById('f_name').value.trim();
          const phone = document.getElementById('f_phone').value.trim();
          const birth = document.getElementById('f_birth').value;
          const bank = document.getElementById('f_bank').value.trim();
          const account = document.getElementById('f_account').value.trim();
          const newPw = document.getElementById('f_newpw').value.trim();
          try {
            await GSApp.updateUser(selectedEmail, { name, phone, birth, bank, account });
            if (newPw) { await GSApp.changePassword(selectedEmail, newPw); }
            await GSApp.loadDB();
            editMode = false;
            renderUsers();
            renderDetail();
          } catch(e) { alert('ìˆ˜ì • ì‹¤íŒ¨: ' + (e.message || 'ì˜¤ë¥˜')); }
        });
        document.getElementById('btnCancelEdit').addEventListener('click', () => {
          editMode = false;
          renderDetail();
        });
      }
    }

    function bindUserEvents() {
      document.getElementById('btnUsersRefresh').addEventListener('click', async () => {
        await GSApp.loadDB();
        renderAdminInfo();
        renderUsers();
        renderDetail();
      });
      document.getElementById('btnCreateUser').addEventListener('click', () => {
        createMode = true;
        editMode = false;
        renderDetail();
      });
      document.getElementById('btnDeleteUser').addEventListener('click', async () => {
        if (!selectedEmail) return;
        const db = GSApp.getDB();
        const u = db.users[selectedEmail];
        if (u && u.role === 'admin') { alert('ê´€ë¦¬ì ê³„ì •ì€ ì‚­ì œí•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'); return; }
        if (!confirm('ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
        delete db.users[selectedEmail];
        await GSApp.saveDB();
        selectedEmail = null;
        createMode = false;
        editMode = false;
        await GSApp.loadDB();
        renderUsers();
        renderDetail();
      });
      document.getElementById('btnExportCsv').addEventListener('click', () => {
        const db = GSApp.getDB();
        const rows = [['ì•„ì´ë””','ì´ë©”ì¼','ì´ë¦„','ì—°ë½ì²˜','ìƒë…„ì›”ì¼','ì€í–‰','ê³„ì¢Œ','ê¶Œí•œ','ì£¼ë¬¸ìˆ˜']];
        Object.values(db.users).forEach(u => {
          rows.push([u.username||'',u.email,u.name||'',u.phone||'',u.birth||'',u.bank||'',u.account||'',u.role||'',(u.orders||[]).length]);
        });
        const csv = rows.map(r => r.map(v => `"${String(v).replace(/"/g,'""')}"`).join(',')).join('\r\n');
        const blob = new Blob([csv],{type:'text/csv;charset=utf-8;'}); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'users.csv'; document.body.appendChild(a); a.click(); setTimeout(()=>{ URL.revokeObjectURL(url); a.remove(); }, 0);
      });
    }

    // ì£¼ë¬¸ê´€ë¦¬ íƒ­
    function showOrders() {
      setActiveTab(tabOrders);
      adminContent.innerHTML = `
        <h2 style="margin:0 0 10px;">ì£¼ë¬¸ ê´€ë¦¬</h2>
        <div id="adminInfo" class="detail-box" style="margin-bottom:14px;"></div>
        <div class="flex" style="align-items:flex-start;">
          <div style="flex:1;min-width:420px;">
            <div style="display:flex;align-items:center;gap:8px;justify-content:space-between;">
              <h2 style="margin:0;">ì£¼ë¬¸ ëª©ë¡</h2>
              <button id="btnOrdersRefresh" class="btn small" style="padding:6px 10px;">ìƒˆë¡œê³ ì¹¨</button>
            </div>
            <div id="ordersList" class="scroll"></div>
          </div>
          <div style="flex:1;min-width:420px;">
            <h2>ìƒì„¸/ê´€ë¦¬</h2>
            <div id="detailOrder" class="detail-box" style="min-height:280px;"></div>
            <div class="toolbar">
              <button class="btn" id="btnCreateOrder">ì£¼ë¬¸ ì¶”ê°€</button>
              <button class="btn" id="btnEditOrder">ìˆ˜ì •</button>
              <button class="btn" id="btnSaveOrder" style="display:none;">ì €ì¥</button>
              <button class="btn danger" id="btnDeleteOrder">ì‚­ì œ</button>
            </div>
            <div id="msgOrder" class="subtle" style="margin-top:6px;"></div>
          </div>
        </div>
      `;
      renderAdminInfo();
      renderOrders();
      renderOrderDetail();
      bindOrderEvents();
    }

    // 1:1 ë¬¸ì˜ê´€ë¦¬ íƒ­
    function showInquiries() {
      setActiveTab(tabInquiries);
      adminContent.innerHTML = `
        <h2 style="margin:0 0 10px;">1:1 ë¬¸ì˜ ê´€ë¦¬</h2>
        <div id="adminInfo" class="panel" style="margin:0 0 12px;"></div>
        <div class="controls">
          <label style="display:flex;align-items:center;gap:6px;"><input type="checkbox" id="onlyUnread"> ìƒˆ ë¬¸ì˜ë§Œ</label>
          <button id="btnInqRefresh" class="btn small" style="margin-left:8px;">ìƒˆë¡œê³ ì¹¨</button>
          <span id="newCount" class="badge" style="display:none;">0</span>
        </div>
        <div class="row">
          <div class="panel list" id="userList"></div>
          <div class="panel detail">
            <div id="thread" class="thread"></div>
            <div style="margin-top:10px;display:flex;gap:8px;">
              <input id="replyEmail" type="hidden" />
              <input id="replyTo" type="hidden" />
              <textarea id="replyContent" placeholder="ë‹µë³€ ë‚´ìš©" style="flex:1;min-height:72px;background:#0b1917;color:#fff;border:1px solid #1e4d47;border-radius:8px;padding:8px;"></textarea>
              <button id="markReadBtn" class="btn" style="min-width:120px;">ì½ìŒìœ¼ë¡œ í‘œì‹œ</button>
              <button id="sendReplyBtn" class="btn">ë‹µë³€</button>
            </div>
          </div>
        </div>
      `;
      renderAdminInfo();
      renderList();
      bindInquiryEvents();
    }

    // ì´ë²¤íŠ¸ ë°”ì¸ë”© í•¨ìˆ˜ë“¤ (ê° íƒ­ë³„)
    function bindUserEvents() {
      document.getElementById('btnUsersRefresh').addEventListener('click', async ()=>{ await GSApp.loadDB(); renderAdminInfo(); renderUsers(); });
      document.getElementById('btnCreateUser').addEventListener('click', ()=>{ createMode=true; editMode=false; renderDetail(); });
      document.getElementById('btnEditUser').addEventListener('click', ()=>{ editMode=true; createMode=false; renderDetail(); });
      document.getElementById('btnSaveUser').addEventListener('click', async ()=>{ /* ì €ì¥ ë¡œì§ */ });
      document.getElementById('btnDeleteUser').addEventListener('click', async ()=>{ /* ì‚­ì œ ë¡œì§ */ });
    }
    function bindOrderEvents() {
      document.getElementById('btnOrdersRefresh').addEventListener('click', async ()=>{ await GSApp.loadDB(); renderAdminInfo(); renderOrders(); });
      document.getElementById('btnCreateOrder').addEventListener('click', ()=>{ createMode=true; editMode=false; renderOrderDetail(); });
      document.getElementById('btnEditOrder').addEventListener('click', ()=>{ editMode=true; createMode=false; renderOrderDetail(); });
      document.getElementById('btnSaveOrder').addEventListener('click', async ()=>{ /* ì €ì¥ ë¡œì§ */ });
      document.getElementById('btnDeleteOrder').addEventListener('click', async ()=>{ /* ì‚­ì œ ë¡œì§ */ });
    }
    function bindInquiryEvents() {
      document.getElementById('onlyUnread').addEventListener('change', renderList);
      document.getElementById('btnInqRefresh').addEventListener('click', async ()=>{ await GSApp.loadDB(); renderAdminInfo(); renderList(); });
      document.getElementById('markReadBtn').addEventListener('click', async ()=>{ /* ì½ìŒ ì²˜ë¦¬ ë¡œì§ */ });
      document.getElementById('sendReplyBtn').addEventListener('click', async ()=>{ /* ë‹µë³€ ì „ì†¡ ë¡œì§ */ });
    }

    // íƒ­ í´ë¦­ ì´ë²¤íŠ¸
    tabUsers.addEventListener('click', showUsers);
    tabOrders.addEventListener('click', showOrders);
    tabInquiries.addEventListener('click', showInquiries);

    // ì´ˆê¸° ë¡œë”©
    showUsers();

    // ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ ë³€ê²½/ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ ê¸°ëŠ¥ ë³µêµ¬
    document.getElementById('btnChangePw').addEventListener('click', async ()=>{
      const newPw = prompt('ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”');
      if(!newPw) return;
      const ok = await GSApp.changeAdminPassword(newPw);
      document.getElementById('pwChangeMsg').textContent = ok ? 'ë¹„ë°€ë²ˆí˜¸ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.' : 'ë¹„ë°€ë²ˆí˜¸ ë³€ê²½ ì‹¤íŒ¨';
    });
    document.getElementById('btnLogout').addEventListener('click', (e)=>{
      e.preventDefault();
      GSApp.logout();
      location.href='index.html';
    });
</script>
</body>
</html>
